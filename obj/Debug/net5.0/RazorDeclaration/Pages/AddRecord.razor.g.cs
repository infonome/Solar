// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace BlazorApp.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "d:\myprogs\BlazorApp\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "d:\myprogs\BlazorApp\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "d:\myprogs\BlazorApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "d:\myprogs\BlazorApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "d:\myprogs\BlazorApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "d:\myprogs\BlazorApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "d:\myprogs\BlazorApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "d:\myprogs\BlazorApp\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "d:\myprogs\BlazorApp\_Imports.razor"
using BlazorApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "d:\myprogs\BlazorApp\_Imports.razor"
using BlazorApp.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "d:\myprogs\BlazorApp\Pages\AddRecord.razor"
using System.Xml;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "d:\myprogs\BlazorApp\Pages\AddRecord.razor"
using System.Net.Http.Headers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "d:\myprogs\BlazorApp\Pages\AddRecord.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "d:\myprogs\BlazorApp\Pages\AddRecord.razor"
using System.Text;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/addrecord")]
    public partial class AddRecord : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 44 "d:\myprogs\BlazorApp\Pages\AddRecord.razor"
       
    private string firstName;
    private string lastName;
    private string addressStreet;
    private string addressCity;
    private string addressState;
    private string addressPostal;
    private string email;
    private string phone;
    private string homeownerOnDeed;
    private string ageOfRoof;
    private string notesForSales;
    private string avgElecBill;
    private string electricityCompany;
    private string altPhone;
    private string spouse;
    private string warmTransfer;
    private string appointmentDate;
    private string vendorLead;
    private async Task SubmitAddRecord(MouseEventArgs e)
    {
        var objHttpClient = new HttpClient();
        string addRecXml = GetXML();
        Console.WriteLine("XML");
        Console.WriteLine(addRecXml);
        var requestMessage = new HttpRequestMessage()
        {
            Method = new HttpMethod("POST"),
            RequestUri = new Uri("https://suntuity.quickbase.com/db/bkdhkmy4a")
        };
        var httpContent = new StringContent(addRecXml, Encoding.UTF8, "application/xml");
    
        requestMessage.Content = httpContent;//new StreamContent(new MemoryStream(Encoding.UTF8.GetBytes(addRecXml)));
        //requestMessage.Content.Headers.Add("Content-Type", "application/xml");
        requestMessage.Content.Headers.Add("QUICKBASE-ACTION", "API_AddRecord");
        Console.WriteLine("Request ToString");
        Console.WriteLine(requestMessage.ToString());
        
        var result = await objHttpClient.SendAsync(requestMessage);
    }
    private string GetXML()
    {
XmlDocument doc = new XmlDocument();
        string xmlDoc = "<qdbapi>"+
                        "<udata>mydata</udata>"+
                        "<usertoken>b3jtnz_g536_ ces4w6jdj6pfs265nw3kvnx8iu</usertoken>"+
                        "<field _fid_=\"7\">AgainstTimeWarms</field>"+
                        "<field _fid_=\"660\">534</field>"+
                        "<field _fid_=\"773\">87</field>"+
                        "</qdbapi>";
        doc.LoadXml(xmlDoc);
        XmlElement root = doc.DocumentElement; 
        
        XmlNode tElem = CreateFidNode(doc, "6", firstName); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "56", lastName); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "11", addressStreet); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "13", addressCity); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "14", addressState); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "15", addressPostal); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "20", email); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "17", phone); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "625", homeownerOnDeed); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "626", ageOfRoof); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "21", notesForSales); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "627", avgElecBill); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "632", electricityCompany); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "679", altPhone); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "751", spouse); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "669", warmTransfer); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "671", appointmentDate); 
        root.AppendChild(tElem);
        tElem = CreateFidNode(doc, "686", vendorLead); 
        root.AppendChild(tElem);

        return doc.OuterXml;
    }
    private XmlNode CreateFidNode(XmlDocument xmlDoc, string fidId, string fidValue)
    {
    XmlNode newElem = xmlDoc.CreateNode("element", "field", "");
    XmlAttribute attr = xmlDoc.CreateAttribute("_fid_");
    attr.Value=fidId;
    newElem.Attributes.Append(attr);
    newElem.InnerText = fidValue;
    return newElem;
    }

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
